<?php $count = 1;?>
<div class="row">
<?php foreach($gatewayconfig as $configkey => $configtitle): ?>
    <?php $selectd_val ='';
        if(isset($gatewayconfigval) && isset($gatewayconfigval->$configkey)){
            $selectd_val =$gatewayconfigval->$configkey;
        }
        $count++;
        $NameFormat =  GatewayConfig::$NameFormat;
        if($GatewayName == 'Porta'){
            unset($NameFormat['IP']);
        }
    ?>
    <?php if($count%2 == 0): ?>
            <div class="clear"></div>
    <?php endif; ?>
     <div class="col-md-6 " <?php if($configkey == 'RateFormat'): ?> id="rate_dropdown" <?php endif; ?>>
        <div class="form-group">
            <label for="field-5" class="control-label <?php if($configkey == 'RateCDR'): ?> col-md-13 <?php endif; ?>"><?php echo $configtitle; ?></label>
            <?php if($configkey == 'NameFormat'): ?>
                <?php echo Form::select($configkey,$NameFormat,$selectd_val,array( "class"=>"selectboxit")); ?>

            <?php elseif($configkey == 'CallType'): ?>
                <?php echo Form::select($configkey,GatewayConfig::$CallType,$selectd_val,array( "class"=>"selectboxit")); ?>

            <?php elseif($configkey == 'BillingTime'): ?>
                <?php echo Form::select($configkey,Company::$billing_time,$selectd_val,array( "class"=>"selectboxit")); ?>

            <?php elseif($configkey == 'RateCDR'): ?>
                <div class="clear col-md-13">
                <p class="make-switch switch-small">
                    <input id="RateCDR"  type="checkbox"   <?php if($selectd_val == 1): ?> checked=""  <?php endif; ?> name="RateCDR" value="1">
                </p>
                </div>
            <?php elseif($configkey == 'RateFormat'): ?>
                <?php
                $disable = array();
                if(!empty($selectd_val)){
                    $disable = array('disabled'=>'disabled');
                }
                $options = array_merge(array( "class"=>"selectboxit"),$disable);
                ?>
                <input type="hidden" name="RateFormat" value="<?php echo $selectd_val; ?>">
                <?php echo Form::select($configkey,Company::$rerate_format,$selectd_val,$options); ?>

            <?php else: ?>
                <input <?php if($configkey == 'password'): ?> type="password" <?php else: ?> type="text" <?php endif; ?>  value="<?php if(isset($gatewayconfigval) && isset($gatewayconfigval->$configkey) && $configkey == 'password'): ?><?php echo Crypt::decrypt($gatewayconfigval->$configkey); ?><?php elseif(isset($gatewayconfigval) && isset($gatewayconfigval->$configkey)): ?><?php echo $gatewayconfigval->$configkey; ?><?php endif; ?>" name="<?php echo $configkey; ?>" class="form-control" id="field-5" placeholder="">
            <?php endif; ?>
         </div>
    </div>
<?php endforeach; ?>
</div>

<script>
if ($.isFunction($.fn.selectBoxIt))
{
    $("select.selectboxit").each(function(i, el)
    {
        var $this = $(el),
                opts = {
            showFirstOption: attrDefault($this, 'first-option', true),
            'native': attrDefault($this, 'native', false),
            defaultText: attrDefault($this, 'text', '')
        };

        $this.addClass('visible');
        $this.selectBoxIt(opts);
    });
}
</script>